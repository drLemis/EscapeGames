<!DOCTYPE html>
<html>
<body>
<p>Amount of members:<input id="membersAmount" type="number" min="1" max="50">
<button onclick="test()">Test!</button>
<p id="result"></p>



<script>
var member = [,,,];
var hour = 0;

function test(){
	document.getElementById("result").innerHTML = "";
	
	console.log(document.getElementById('membersAmount').min+" "+document.getElementById('membersAmount').max + " " + document.getElementById('membersAmount').value);
	
	if (document.getElementById('membersAmount').value < document.getElementById('membersAmount').min){
		document.getElementById('membersAmount').value = document.getElementById('membersAmount').min;
	}
	
	if (document.getElementById('membersAmount').value > document.getElementById('membersAmount').max){
		document.getElementById('membersAmount').value = document.getElementById('membersAmount').max;
	}
	
	
	for (var i = 0; i <= document.getElementById('membersAmount').value-1 ; i++){
		member[i] = createMember();
	}
	
	hour = 0;
	makeAction();
}



function makeAction() {
	var aliveMembers = 0;
	for (var i = 0; i <= document.getElementById('membersAmount').value-1; i++) {
		if (member[i][0]==0){
			displayAction(member[i]);
			if (member[i][0]==0){
				aliveMembers++;
			}
		}
	}
	
	
	if (aliveMembers>0&&hour<10){
		newHour();
	}
}

function displayAction(activeMember){
	document.getElementById("result").innerHTML = document.getElementById("result").innerHTML + "<p>" + activeMember[2]+" "+activeMember[3]+", "+activeMember[1]+", "+activeMember[4]+" with "+activeMember[5]+" in hands, "+getRandomAction(activeMember);
}

function newHour(){
	hour++;
	document.getElementById("result").innerHTML = document.getElementById("result").innerHTML + "<p>" + "HOURS FROM COLLAPSE: "+ hour;
	makeAction()
}

function createMember(){
	var gender = ["male", "female"];
	var role = ["guard", "scientist", "technitian", "D-class", "visitor"];
	
	var activeMember = [,,,,,]
	
	activeMember[0] = 0;
	activeMember[1] = gender[Math.floor(Math.random()*(gender.length))];
	activeMember[2] = getRandomFirstName(activeMember[1])
	activeMember[3] = getRandomSecondName();
	activeMember[4] = role[Math.floor(Math.random()*(role.length))];
	activeMember[5] = getRandomWeapon();
		
	return activeMember;
	
}

function getRandomFirstName(gender){
	var namePool = "";
	if (gender=="male"){
		namePool = ["Michael","Jacob","Alex","Tyler","Andrew","Daniel","John","Matthew","Ryan","Austin","David","Chris","Nick","Brandon","Nathan","Anthony","Ethan","Justin","Joshua","Jordan","Jake","Jack","Dylan","James","Kyle","Kevin","Ben","Noah","Eric","Sam","Christian","Josh","Zach","Joseph","Logan","Jonathan","Adam","Aaron","Jason","Christopher","Caleb","Brian","William","Robert","Joe","Luke","Matt","Cameron","Thomas","Hunter","Evan","Nicholas","Cody","Zachary","Chase","Mike","Jose","Steven","Max","Ian","Connor","Mark","Cole","Patrick","Sean","Samuel","Gabriel","Nate","Devin","Will","Alexander","Jeremy","Isaac","Jesse","Mason","Joey","Carlos","Bryan","Jared","Tanner","Peter","Tristan","Gavin","Shane","Seth","Stephen","Paul","Trevor","Elijah","Brendan","Isaiah","Zack","Marcus","Lucas","Garrett","Aidan","Luis","Charles"]; 
	}
	if (gender=="female"){
		namePool = ["Hannah","Sarah","Ashley","Taylor","Jessica","Katie","Emma","Lauren","Samantha","Rachel","Olivia","Kayla","Anna","Megan","Alyssa","Alexis","Grace","Madison","Elizabet","Nicole","Amanda","Abby","Victoria","Brianna","Morgan","Amber","Sydney","Brittany","Haley","Natalie","Julia","Savannah","Danielle","Courtney","Rebecca","Paige","Jasmine","Sara","Stephanie","Jennifer","Mary","Chloe","Maddie","Lily","Michelle","Brooke","Jordan","Erin","Shelby","Kaitlyn","Jenna","Sierra","Hailey","Maria","Andrea","Destiny","Kate","Autumn","Allison","Zoe","Amy","Lexi","Sophia","Claire","Marissa","Abigail","Isabella","Molly","Kelsey","Kelly","Kaylee","Sophie","Laura","Alex","Mackenzie","Melissa","Tiffany","Christina","Leah","Caroline","Maggie","Alexa","Bailey","Heather","Caitlin","Katherine","Makayla","Cheyenne","Miranda","Erica","Vanessa","Mia","Madeline","Faith","Audrey","Gabby","Breanna","Jade"];
	}
	
	return namePool[Math.floor(Math.random()*(namePool.length))];
}

function getRandomSecondName(){
	var namePool = ["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson","Moore","Taylor","Anderson","Thomas","Jackson","White","Harris","Martin","Thompson","Garcia","Martinez","Robinson","Clark","Rodriguez","Lewis","Lee","Walker","Hall","Allen","Young","Hernandez","King","Wright","Lopez","Hill","Scott","Green","Adams","Baker","Gonzalez","Nelson","Carter","Mitchell","Perez","Roberts","Turner","Phillips","Campbell","Parker","Evans","Edwards","Collins","Stewart","Sanchez","Morris","Rogers","Reed","Cook","Morgan","Bell","Murphy","Bailey","Rivera","Cooper","Richardson","Cox","Howard","Ward","Torres","Peterson","Gray","Ramirez","James","Watson","Brooks","Kelly","Sanders","Price","Bennett","Wood","Barnes","Ross","Henderson","Coleman","Jenkins","Perry","Powell","Long","Patterson","Hughes","Flores","Washington","Butler","Simmons","Foster","Gonzales","Bryant","Alexander","Russell","Griffin","Diaz","Hayes"];
	return namePool[Math.floor(Math.random()*(namePool.length))];
}

function getRandomWeapon(currentWeapon){
	var weapon = ["nothing","pencil","baton","gun"]
	var foundWeapon = weapon[Math.floor(Math.random()*(weapon.length))];
	if (weapon.indexOf(currentWeapon)>=weapon.indexOf(foundWeapon)){
		return currentWeapon;
	}
	return foundWeapon;
}

function getRandomAction(activeMember){
	var actions = ["dies in fight", "found ", "escaping with a vent shaft", "searching for supplies", "reaching the evacuation zone", "crying alone", "stalking another survivor", "commiting suicide"];
	var activeAction = actions[Math.floor(Math.random() * (actions.length))];
	if (activeAction=="dies in fight"||activeAction=="commiting suicide"){
		activeAction="<font color='red'>"+activeAction+"</font>"
		activeMember[0]=1;
	}
	if (activeAction=="reaching the evacuation zone"){
		activeAction="<font color='green'>"+activeAction+"</font>"
		activeMember[0]=2;
	}
	if (activeAction=="found "){
		var tempWeapon = getRandomWeapon(activeMember[5]);
		if (tempWeapon==activeMember[5]){
			activeAction = getRandomAction(activeMember);
			return activeAction;
		}
		activeMember[5]=tempWeapon;
		activeAction = activeAction+activeMember[5];
	}
	
	return activeAction;
}

</script>
</body>
</html>
